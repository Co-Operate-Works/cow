<!DOCTYPE html>
<html>
<head>
    <title>일정달력</title>

    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>


<!--    <link href='fullcalendar.css' rel='stylesheet'/>-->
<!--    <link href='fullcalendar.print.css' rel='stylesheet' media='print'/>-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.5/main.min.css" integrity="sha512-1P/SRFqI1do4eNtBsGIAqIZIlnmOQkaY7ESI2vkl+q+hl9HSXmdPqotN0McmeZVyR4AWV+NvkP6pKOiVdY/V5A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src='jquery-ui.custom.min.js' type="text/javascript"></script>
    <!--<script src='fullcalendar.js' type="text/javascript"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.5/main.min.js" integrity="sha512-VyGX7HXwa9yMgIfDPYcj7+XFjtSEzqY7LTf2Tvn2FAf4O6MkD5UzNkrlkMHyLQMbdYfor8SNYKyyeBhTazNgPw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            $(function () {
                $.ajax({
                    url: "/schedule/list", // 변경하기
                    method: "GET",
                    dataType: "json",
                    success: function (data) {
                        console.log(data); // log 로 데이터 찍어주기.

                        var calendarEl = document.getElementById('calendar');

                        var calendar = new FullCalendar.Calendar(calendarEl, {
                            initialView: 'timeGridWeek',
                            headerToolbar: {
                                left: 'prev,next today',
                                center: 'title',
                                right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
                            },
                            editable: true,
                            droppable: true, // this allows things to be dropped onto the calendar
                            drop: function (arg) {
                                // is the "remove after drop" checkbox checked?
                                if (document.getElementById('drop-remove').checked) {
                                    // if so, remove the element from the "Draggable Events" list
                                    arg.draggedEl.parentNode.removeChild(arg.draggedEl);
                                }
                            },
                            /**
                             * data 로 값이 넘어온다. log 값 전달.
                             */
                            events: data
                        });

                        calendar.render();
                    },
                    fail: function (jqXHR, textStatus) {
                        alert("Request failed: " + textStatus);
                    }

                });

            });
        });

    </script>

</head>
<body>
<div id='wrap'>

    <div id='calendar'></div>

    <div style='clear:both'></div>
</div>


</body>
</html>