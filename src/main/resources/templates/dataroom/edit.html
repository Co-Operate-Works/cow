<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<div layout:fragment="content">
    <head>
        <meta charset="UTF-8">
        <title>Insert title here</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script type="text/javascript" th:inline="javascript">
            $(document).ready(function () {
                $("#del").click(function () {
                    location.href = "/dataroom/del?num=[[${dto.num }]]";
                });
            });
        </script>
    </head>
    <body>
    <h3>자료 상세페이지</h3>
    <form action="/dataroom/edit" method="post">
        <table border="1">
            <tr>
                <th>글번호</th>
                <td><input type="text" name="num" th:value="${dto.num }" readonly></td>
            </tr>
            <tr>
                <th>작성일</th>
                <td><input type="text" name="wdate" th:value="${dto.wdate }" readonly></td>
            </tr>
            <tr>
                <th>작성자</th>
                <td><input type="text" name="writer" th:value="${dto.writer.id }" readonly></td>
            </tr>
            <tr>
                <th>제목</th>
                <td><input type="text" name="title" th:value="${dto.title }"></td>
            </tr>
            <tr>
                <th>내용</th>
                <td><textarea rows="10" cols="30" name="content" th:text="${dto.content }"
                              th:readonly="${not (session.username.id == dto.writer.id)}"></textarea></td>
            </tr>
            <tr th:if="${session.username.id==dto.writer.id }">
                <th>자료변경</th>
                <td><input type="flie" name="fname" th:value="${dto.fname }"></td>
            </tr>
            <tr>
                <th>자료</th>
                <td><a th:href="@{/dataroom/down(fname=${dto.fname}, num=${dto.num})}" th:text="${dto.fname}"></a></td>
            </tr>
            <tr th:if="${session.username.id == dto.writer.id}">
                <th>편집</th>
                <td><input type="submit" value="수정"><input type="button" id="del" value="삭제"></td>
            </tr>
        </table>
    </form>
    </body>
</div>
</html>